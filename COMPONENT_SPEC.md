# CBJ Component Spec v1

このドキュメントは「見た目」ではなく「部品の振る舞い」を固定するための仕様です。CBJは世界観（静けさ/編集/アーカイブ）を壊さず、部品の整合性でプロ品質に寄せます。

共通ルール

・重要操作は `.cb-tap`（44px）を必ず満たす
・状態は必ず用意する：default / hover / active / focus-visible / disabled / loading
・同じ部品は全ページで同じ：余白、角丸、罫線、文字サイズ、状態

---

## 1) Buttons

### 1-1. Primary Button（主要CTA）

用途

・“次に進む” を明確にする（例：Enter、適用、保存）

要件

・最小領域：44×44（`.cb-tap`）
・ラベル：動詞 + 目的語（曖昧な “OK/More” を避ける）
・状態：hover（色 or 罫線）、active（軽い沈み）、disabled（コントラストは維持、押せないのが分かる）、loading（終点が分かる）

推奨

・Primaryはページ内1つが基本（多いとヒエラルキー崩壊）

### 1-2. Ghost / Text Button（補助）

用途

・閉じる、キャンセル、詳細、二次導線

要件

・タップ領域は同じく44×44
・hoverでアクセント（Tiffany）を使うのはOK、常時は使わない

---

## 2) Links

### 2-1. Inline Link（本文中）

要件

・本文中リンクは “リンクであること” が分かる（下線 or それに準じる）
・リンクテキストは情報を持つ（“こちら” “詳細” などの汎用語を避ける）

### 2-2. Navigation Link（メニュー/目次）

要件

・フォーカスリングが確実に見える（focus-visible）
・選択中は“色”だけに頼らず、太さ/記号/位置で分かる

---

## 3) Cards

用途

・ARCHIVEの棚、記事一覧、車両一覧

要件

・カードは「共通領域」でグルーピングする（薄い境界 + 一貫した余白）
・タイトル→要約→メタ→CTA の順序を固定
・カード全体がクリック可能なら、内部リンクの競合を避ける

---

## 4) Chips / Tags

用途

・分類記号（タグ、フィルタ、適用中条件）

要件

・同一サイズ、同一角丸、同一余白
・適用中は“差分”が明確（背景 or 枠 or アイコン）

---

## 5) Forms

### 5-1. Input / Select

要件

・focus-visibleで枠/影が変わる（見落とし防止）
・エラーは色だけで表現しない（文言 + アイコンなど）

### 5-2. Range / Numeric

要件

・単位（円、年、kmなど）をUIで明示
・入力値が無効なときの文言を固定（ページごとに言い回しを変えない）

---

## 6) Overlay / Dialog（ハンバーガーメニュー等）

要件

・Escで閉じられる
・閉じるボタンは常に見える、かつ44×44
・フォーカスが背景に逃げない（少なくとも“閉じる”に戻れる）
・フォーカスが隠れない（scroll-padding / 位置調整）

---

## 7) Lists / TOC（目次）

要件

・現在位置が分かる（選択中の表示）
・長い目次は折りたたみ/スクロールで制御（全文表示で圧迫しない）
・各項目は44×44相当で押せる（リストとして並ぶリンクはWCAGのTarget Size例外にならないケースがある）

---

## 8) Tooltip（用語の補足）

用途

・専門用語の短い定義、但し“UIの主役”にしない

要件

・hoverだけに依存しない（focusでも表示、タップ環境は配置を変える）
・長文はツールチップに入れず、別の説明ブロックに逃がす

---

## 9) Pagination / Filter

要件

・適用中フィルタが常に見える（チップで表示）
・解除はワンタップ（× or Reset）
・ページ送りは「現在地/総数」が分かる

---

## 10) 例外の扱い

・例外を作るときは、必ず「なぜ既存コンポーネントで解けないか」を書く（レビュー用）
・例外は局所CSSに閉じ、トークン（色/余白/角丸/影/文字）を増やさない

---

## 11) Utility classes（実装の拠り所）

・`.cb-tap` : タップ領域規格
・`.cb-prose` / `.cb-prose-block` : 本文の読み柱
・`.cb-btn` / `.cb-btn--ghost` : ボタンの基礎
・`.cb-card` : カードの基礎
・`.cb-chip` : チップの基礎
・`.cb-input` : 入力の基礎
