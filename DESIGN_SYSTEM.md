# CBJ Design System v1（規約）

目的は「雰囲気を崩さず、規格（尺度）で完成度を上げる」ことです。装飾を増やすのではなく、認知負荷・視線誘導・階層・タイポ・配色を“測れるルール”に落とし、全ページで一貫させます。

この規約は、(1) 認知心理/UX研究、(2) アクセシビリティ基準、(3) プラットフォームの実務ガイドライン、の交差点を採用します。ユーザーはまず「見た瞬間」に美しさと信頼性を判断し（超短時間でも差が出る）、次に「読める/押せる/迷わない」で滞在が決まります。

---

## 0. 変更しないもの（CBJの雰囲気を守るための非交渉条件）

1) 写真・余白・静けさが主役。常時アニメや派手な装飾で“デザインしている感”を足さない。

2) 情報設計は「ARCHIVE → CHAPTER（章）」の編集構造を保つ。探索ではなく“入館して読む/見る”。

3) 色はアクセントを一点集中（Tiffany系）し、日用品のUIに寄せない（カラフルにしない）。

---

## 1. 理論の採用（なぜこの規格にするか）

### 1-1. 認知負荷（Cognitive Load）

UIにおける設計目標は「余計な処理（外在的負荷）を減らし、内容理解（有益な負荷）に容量を使わせる」ことです。問題解決における処理容量の食い合いは学習・理解を阻害しうる、という枠組みが広く参照されます。Swellerの認知負荷理論は、その代表です。

実装上のルールはシンプルです。

・ページ内で「最重要」を先に固定し、読者の探索コストを下げる
・同じ意味の要素は同じ見た目・同じ位置に置き、学習コストを下げる（テンプレ化）
・装飾は意味があるときだけ（状態/階層/区切り）に使う

参考：Sweller (1988) は、問題解決時の処理がスキーマ形成に使える処理容量を奪うという観点を示しています（UIでは“余計な迷い”が該当します）。

---

### 1-2. 第一印象（First Impression）と「ちょうど良い複雑さ」

Webの第一印象は非常に短い提示時間でも、視覚的複雑さ（Visual Complexity）と“典型性”（Prototypicality）に左右されることが示されています。Tuchらは、VC/PTが極短時間（17ms〜）でも審美評価に影響しうることを報告しています。

CBJに落とすとこうなります。

・見た目は「低〜中程度の複雑さ」へ収束（要素数、罫線、影、装飾の種類を増やさない）
・ナビやUIの型は“典型的に分かる”形に寄せる（押せる、選べる、閉じる、戻るが迷わない）
・その上で写真・タイポ・余白で個性を出す（独自性をUIの奇抜さに寄せない）

---

### 1-3. 美しさの二次元（古典性 × 表現性）

Lavie & Tractinskyは、Webの美しさを大きく「古典的（秩序・整然・清潔）」と「表現的（創造性・独自性）」に分けて測定できる、という枠組みを提示しています。

CBJは“古典性”を土台にします。

・古典性：余白、整列、タイポの階層、統一ルール
・表現性：アクセント色、写真の質感、コピーの編集トーン

つまり「ルールで整え、表現は一点集中」です。

---

## 2. 読ませる設計（視線誘導と階層）

### 2-1. スキャン前提（Fパターン対策）

人はページを丁寧に読まず、スキャンします。NN/gは、F字型を含むスキャンパターンと、その“対策”（重要情報を最初の段落に置く、見出し先頭に情報語を置く、箇条書き、不要文削除など）を整理しています。

CBJでの規約（長文ページ共通）

・冒頭2ブロックに「結論/要点」を置く（TAKEAWAYSの位置固定）
・見出しは先頭2語で意味が通る（左端の情報密度が重要）
・箇条書きは“短く、同じ型”で（文章のまま連ねない）
・章の切れ目は余白とラベルで“見える”ようにする

---

### 2-2. 行長（Reading Column）

長文は「行が長すぎる」と目の復帰が難しくなり、読むリズムが崩れます。Baymardは可読性の観点から行長のレンジ（おおよそ50〜75文字）と、長すぎ/短すぎの問題を整理しています。

CBJ規約

・本文の最大幅は 68ch（wideでも74ch）を上限
・本文の左右は“読書の柱”として中央寄せ（cb-prose）
・見出し/図/補足は柱からの“はみ出し”を許容してもよいが、本文は守る

（実装：`app/globals.css` の `--cb-prose-width` と `cb-prose-block` を使用）

---

## 3. 色とコントラスト（配色規約）

### 3-1. コントラストは“趣味”ではなく基準

WCAGは、通常テキスト 4.5:1（大きい文字は 3:1）を最低ラインとして定義しています。CBJのように写真上に文字を置く可能性があるサイトでは、文字背景（暗幕/局所暗化/配置固定）を含めて“破綻しない”ように設計する必要があります。

CBJ規約

・本文/ナビ/フォーム/メタ情報は 4.5:1 を満たす
・大見出し/太字/大きい文字は 3:1 以上
・「薄いグレー文字 × 白背景」を常用しない（読み疲れの原因）
・アクセント色（Tiffany）は“リンク/状態/ハイライト”に限定し、本文色にしない

参考：AppleのHIGもコントラスト最小値としてWCAG AAの比率を挙げています。

---

### 3-2. 色の役割分担（セマンティックトークン）

色は「意味（役割）」で管理し、ページごとの“気分”で増やさない。

・BG（背景） / Surface（白い棚）
・Text（本文） / Muted（補助）
・Border（罫線）
・Accent（アクセント）
・Danger/Warning/Success（意味色。多用しない）

（実装：`--cb-color-*`）

---

## 4. タップ領域と操作性（スマホ前提）

### 4-1. タップ領域の最低ライン

WCAG 2.2 は Target Size (Minimum) として 24×24 CSS px（または十分な間隔）をAAで要求します。一方、プラットフォーム実務では iOS 44×44pt、Material は 48×48dp を推奨しています。

CBJ規約

・最低：24×24（WCAG AA）
・標準：44×44（iOSの指標に合わせ、押しやすさの実務ライン）
・重要操作（メニュー/閉じる/フィルタ/比較/ページ送り）は 44×44 を必達

（実装：`--cb-tap: 44px` と `.cb-tap` を重要UIに適用）

---

## 5. グルーピング（Gestalt）

人は「近いものを同じグループ」と見ます（近接）。枠で囲われたものも同じグループと見ます（共通領域）。これは視線誘導の基礎で、余白・罫線・背景差が“情報の構造”になります。

CBJ規約

・関連要素は近接でまとめる（ラベルと値、見出しと本文、カード内要素）
・グループ間は 8pxスケールで確実に離す（曖昧な余白禁止）
・カード/棚は「共通領域」を使ってまとめる（薄い境界線/背景差）

---

## 6. フォーカスとキーボード（最低限のプロ品質）

フォーカスは“見える”だけでなく、“隠れない”ことが必要です。WCAG 2.2 の Focus Not Obscured (Minimum) は、著者が作った固定UIやオーバーレイにより、フォーカス要素が完全に隠れないことを求めます。

CBJ規約

・`focus-visible` の視認性を確保（リング色・太さ・オフセットの統一）
・固定UIやオーバーレイを置く場合、フォーカスが隠れない配置/スクロール余白を確保

（実装：`html { scroll-padding-top/bottom }` と `:focus-visible` ルール）

---

## 7. 運用ルール（デザイン崩壊を防ぐ）

1) 新規UIを作るときは「トークン → コンポーネント → ページ」の順で組む。

2) 例外（ページ固有の見た目）を作る前に、既存コンポーネントの組み合わせで解決できないか確認する。

3) 変更のDefinition of Doneは `DESIGN_QA_CHECKLIST.md` を満たすこと。

---

## 参考文献 / ガイドライン（採用根拠）

・Sweller, J. (1988). Cognitive Load During Problem Solving: Effects on Learning. Cognitive Science.
・Tuch, A. N. et al. (2012). The role of visual complexity and prototypicality regarding first impression of websites. International Journal of Human-Computer Studies.
・Lavie, T., & Tractinsky, N. (2004). Assessing dimensions of perceived visual aesthetics of web sites. International Journal of Human-Computer Studies.
・NN/g: F-Shaped Pattern of Reading on the Web.
・Baymard: Readability: The Optimal Line Length.
・W3C/WAI: WCAG 2.2 (Target Size, Focus Not Obscured), WCAG (Contrast Minimum).
・Apple Human Interface Guidelines: Accessibility.
・Material Design: Accessibility (Touch targets).
